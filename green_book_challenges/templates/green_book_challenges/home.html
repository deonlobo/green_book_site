
{% extends 'green_book_app/base.html' %}

{% block content %}
<div class="container-fluid p-0">
    <!-- Image with text overlay -->
    <!-- Image with text overlay -->
    <div class="position-relative">
        <img src="../../static/challenges_images/headingImg.jpg" class="img-fluid w-100" style="height: 500px;" alt="Eco-friendly lifestyle">

        <!-- Conditional overlay text based on authentication -->
        {% if user.is_authenticated %}
            <div class="overlay-text text-center text-white">
                <h2 style="font-size: 54px; color: deepskyblue">Welcome {{ User.first_name }}!</h2>
                <p>Challenge yourself and others to live sustainably</p>
                <p>Together, we can make a difference!</p>
                <button id="openModal" class="btn btn-success btn-lg mt-3">Post Challenge</button>



            </div>
        {% else %}
            <div class="overlay-text text-center text-white">
                <h2>Join Us in Living Eco-Friendly</h2>
                <p>Discover eco-challenges and sustainable practices</p>
                <p style="color: lightgreen; font-size: 44px; padding-bottom: 20px">Think Green</p>
                <a href="#" class="btn btn-success btn-lg mt-3">Participate</a>
            </div>
        {% endif %}
    </div>

<!-- Modal for Post Challenge Form -->
    <div class="modal fade" id="postChallengeModal" tabindex="-1" role="dialog" aria-labelledby="postChallengeModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="postChallengeModalLabel">Post Challenge</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Form to post challenge -->
                    <form id="postChallengeForm" method="post" action="{% url 'challenge1' %}">
                        {% csrf_token %}
                        {{ form.as_p }}
                        <button type="submit" class="btn btn-primary mt-3">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>






    <div class="container mt-3">
                <h2 style="color: saddlebrown; text-align: left">Trending Challenges</h2>

        <!-- Carousel of images with captions -->
        <div id="imageCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="../../static/challenges_images/img1.jpg" class="d-block w-100" alt="July Week 1">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>July Week 1</h5>
                        <p>Image caption for July Week 1.</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="../../static/challenges_images/img1.jpg" class="d-block w-100" alt="July Week 1">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>July Week 1</h5>
                        <p>Another image caption for July Week 1.</p>
                    </div>
                </div>
                <!-- Add more carousel items as needed -->
            </div>
            <a class="carousel-control-prev" href="#imageCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#imageCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>



</div>

<script>
    // JavaScript to show modal on button click
    document.getElementById('openModal').addEventListener('click', function() {
        $('#postChallengeModal').modal('show');
    });
</script>





<style>
    .position-relative {
        position: relative;
        width: 100%;
    }

    .overlay-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        {#background-color: rgba(0, 0, 0, 0.5); /* semi-transparent background */#}
        padding: 30px;
        border-radius: 5px;
        width: 80%; /* Adjust width as needed */
        max-width: 1200px; /* Example maximum width */
    }

    .overlay-text h2,
    .overlay-text p {
        color: beige; /* Text color */
        margin: 0; /* Remove default margin */
        padding-bottom: 10px;
        font-size: 44px;

    }

    /* Set height for the top-most image */
    .img-fluid {
        height: 400px; /* Adjust height as needed */
    }

     /* Adjust carousel item dimensions */
    .carousel-item img {
        height: 300px; /* Adjust height as needed */
    }

/* Style for the form container */
    #postChallengeForm {
        max-width: 600px;
        margin: 20px auto;
        padding: 20px;
        background-color: #f9f9f9;
        border: 1px solid #ccc;
        border-radius: 5px;
    }

    /* Style for form inputs and buttons */
    #postChallengeForm form {
        margin-bottom: 0; /* Remove default margin */
    }

    #postChallengeForm .btn-primary {
        margin-top: 10px;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var postChallengeBtn = document.getElementById('postChallengeBtn');
        var participateBtn = document.getElementById('participateBtn');
        var postChallengeForm = document.getElementById('postChallengeForm');

        if (postChallengeBtn) {
            postChallengeBtn.addEventListener('click', function() {
                postChallengeForm.style.display = 'block';
                postChallengeBtn.style.display = 'none'; // Optionally hide the button after showing the form
            });
        }

        if (participateBtn) {
            participateBtn.addEventListener('click', function() {
                // Add your participation logic here
            });
        }
    });
</script>
{% endblock %}
